 scrape-and-generate:
    runs-on: ubuntu-latest









    steps:
      # 1. RÃ©cupÃ©rer le code
      - name: ğŸ“¥ Checkout repository
@@ -26,23 +34,35 @@ jobs:
        with:
          python-version: '3.11'

      # 3. Installer Chrome et ChromeDriver
      - name: ğŸŒ Install Chrome
        run: |
          sudo apt-get update





          sudo apt-get install -y wget gnupg
          wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | sudo apt-key add -
          sudo sh -c 'echo "deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google.list'
          sudo apt-get update
          sudo apt-get install -y google-chrome-stable
      
      # 4. Installer les dÃ©pendances Python







      - name: ğŸ“¦ Install dependencies
        run: |
          pip install --upgrade pip
          pip install -r requirements.txt
      
      # 5. CrÃ©er le fichier de config (reponse.json)
      - name: ğŸ”§ Create config file
        run: |
          echo '{
@@ -51,20 +71,20 @@ jobs:
            "password": "${{ secrets.CELCAT_PASSWORD }}"
          }' > reponse.json
      
      # 6. ExÃ©cuter le scraper
      - name: ğŸ•·ï¸ Run scraper (26 weeks)
        run: python src/scraper_complet.py
        timeout-minutes: 60

      # 7. Convertir HTML â†’ JSON
      - name: ğŸ“„ Convert HTML to JSON
        run: python src/finaljson.py

      # 8. Convertir JSON â†’ ICS
      - name: ğŸ“… Generate ICS file
        run: python src/json_to_ics.py

      # 8.5 Rassembler les fichiers HTML & JSON gÃ©nÃ©rÃ©s
      - name: ğŸ“‚ Collect HTML & JSON outputs
        run: |
          mkdir -p debug_outputs
@@ -77,28 +97,28 @@ jobs:
            cp emploi_du_temps_complet.json debug_outputs/
          fi

      # 9. Obtenir la date pour le nom du fichier
      - name: ğŸ“† Get current date
        id: date
        run: echo "date=$(date +'%Y-%m-%d')" >> $GITHUB_OUTPUT

      # 10. Upload les fichiers de debug (HTML + JSON) comme artifact
      - name: ğŸ—‚ï¸ Upload debug files (HTML + JSON)
        uses: actions/upload-artifact@v4
        with:
          name: debug-files-${{ steps.date.outputs.date }}
          path: debug_outputs/
          retention-days: 90

      # 11. Upload le fichier .ics comme artifact
      - name: ğŸ“¤ Upload ICS file
        uses: actions/upload-artifact@v4
        with:
          name: emploi-du-temps-${{ steps.date.outputs.date }}
          path: emploi_du_temps_complet_v2.ics
          retention-days: 180

      # 12. CrÃ©er une release GitHub avec le fichier .ics
      - name: ğŸš€ Create GitHub Release
        uses: softprops/action-gh-release@v1
        with:
